{"version":3,"sources":["../app.js"],"names":["express","require","http","cors","session","FileStore","passport","cookieParser","env","scheduler","id_generator","adminRouter","usersRouter","userPageRouter","app","console","log","corsOptions","origin","credentials","use","json","urlencoded","extended","session_secret_key","genid","req","sessionID","store","secret","resave","saveUninitialized","cookie","maxAge","initialize","set","port","server","createServer","listen","module","exports"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,IAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AACA,IAAMG,OAAO,GAAGH,OAAO,CAAC,iBAAD,CAAvB;;AACA,IAAMI,SAAS,GAAGJ,OAAO,CAAC,oBAAD,CAAP,CAA8BG,OAA9B,CAAlB;;AACA,IAAME,QAAQ,GAAGL,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAMM,YAAY,GAAGN,OAAO,CAAC,eAAD,CAA5B;;AAEA,IAAMO,GAAG,GAAGP,OAAO,CAAC,SAAD,CAAnB;;AACA,IAAMQ,SAAS,GAAGR,OAAO,CAAC,iBAAD,CAAzB;;AACA,IAAMS,YAAY,GAAGT,OAAO,CAAC,8BAAD,CAA5B;;AAEA,IAAMU,WAAW,GAAGV,OAAO,CAAC,gBAAD,CAA3B;;AACA,IAAMW,WAAW,GAAGX,OAAO,CAAC,eAAD,CAA3B;;AACA,IAAMY,cAAc,GAAGZ,OAAO,CAAC,mBAAD,CAA9B;;AAEA,IAAMa,GAAG,GAAGd,OAAO,EAAnB;AAEAe,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAP,SAAS;AAET,IAAMQ,WAAW,GAAG;AAClBC,EAAAA,MAAM,EAAE,uBADU;AAElBC,EAAAA,WAAW,EAAE;AAFK,CAApB;AAKAL,GAAG,CAACM,GAAJ,CAAQjB,IAAI,CAACc,WAAD,CAAZ;AACAH,GAAG,CAACM,GAAJ,CAAQpB,OAAO,CAACqB,IAAR,EAAR;AACAP,GAAG,CAACM,GAAJ,CAAQpB,OAAO,CAACsB,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAT,GAAG,CAACM,GAAJ,CAAQb,YAAY,CAACC,GAAG,CAACgB,kBAAL,CAApB;AACAV,GAAG,CAACM,GAAJ,CAAQhB,OAAO,CAAC;AACdqB,EAAAA,KAAK,EAAE,eAACC,GAAD,EAAS;AACdX,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYU,GAAG,CAACC,SAAhB;AACA,WAAOjB,YAAY,EAAnB,CAHc,CAGS;AACxB,GALa;AAMdkB,EAAAA,KAAK,EAAE,IAAIvB,SAAJ,EANO;AAOdwB,EAAAA,MAAM,EAAErB,GAAG,CAACgB,kBAPE;AAQdM,EAAAA,MAAM,EAAE,KARM;AASdC,EAAAA,iBAAiB,EAAE,IATL;AAUdC,EAAAA,MAAM,EAAE;AAAEC,IAAAA,MAAM,EAAE;AAAV;AAVM,CAAD,CAAf;AAYAnB,GAAG,CAACM,GAAJ,CAAQd,QAAQ,CAAC4B,UAAT,EAAR;AACApB,GAAG,CAACM,GAAJ,CAAQd,QAAQ,CAACF,OAAT,EAAR;AAEAU,GAAG,CAACM,GAAJ,CAAQ,OAAR,EAAiBR,WAAjB;AACAE,GAAG,CAACM,GAAJ,CAAQ,WAAR,EAAqBP,cAArB;AACAC,GAAG,CAACM,GAAJ,CAAQ,QAAR,EAAkBT,WAAlB;AAEAG,GAAG,CAACqB,GAAJ,CAAQ,MAAR,EAAgB3B,GAAG,CAAC4B,IAApB;AAEA,IAAMC,MAAM,GAAGnC,IAAI,CAACoC,YAAL,CAAkBxB,GAAlB,CAAf;AAEAC,OAAO,CAACC,GAAR;AACAqB,MAAM,CAACE,MAAP,CAAc/B,GAAG,CAAC4B,IAAlB;AAEAI,MAAM,CAACC,OAAP,GAAiB3B,GAAjB","sourcesContent":["const express = require('express');\nconst http = require('http');\nconst cors = require('cors');\nconst session = require('express-session');\nconst FileStore = require('session-file-store')(session);\nconst passport = require('passport');\nconst cookieParser = require('cookie-parser');\n\nconst env = require('./const');\nconst scheduler = require('./mail/timer.js');\nconst id_generator = require('./custom_module/id_generator');\n\nconst adminRouter = require('./routes/admin');\nconst usersRouter = require('./routes/user');\nconst userPageRouter = require('./routes/userPage');\n\nconst app = express();\n\nconsole.log('Starting scheduler');\nscheduler();\n\nconst corsOptions = {\n  origin: 'http://localhost:3000',\n  credentials: true,\n};\n\napp.use(cors(corsOptions));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser(env.session_secret_key));\napp.use(session({\n  genid: (req) => {\n    console.log('Inside the session middleware');\n    console.log(req.sessionID);\n    return id_generator(); // use UUIDs for session IDs\n  },\n  store: new FileStore(),\n  secret: env.session_secret_key,\n  resave: false,\n  saveUninitialized: true,\n  cookie: { maxAge: 2419200000 },\n}));\napp.use(passport.initialize());\napp.use(passport.session());\n\napp.use('/user', usersRouter);\napp.use('/userPage', userPageRouter);\napp.use('/admin', adminRouter);\n\napp.set('port', env.port);\n\nconst server = http.createServer(app);\n\nconsole.log(`server starting on port: 4200`);\nserver.listen(env.port);\n\nmodule.exports = app;\n"],"file":"app.js"}