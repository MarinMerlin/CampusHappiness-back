{"version":3,"sources":["../app.js"],"names":["console","log","express","require","http","cors","session","FileStore","passport","cookieParser","env","scheduler","id_generator","adminRouter","usersRouter","app","corsOptions","origin","credentials","use","json","urlencoded","extended","session_secret_key","genid","req","sessionID","store","secret","resave","saveUninitialized","cookie","maxAge","initialize","set","port","server","createServer","listen","module","exports"],"mappings":";;AAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;;AACA,IAAMC,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,IAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AACA,IAAMG,OAAO,GAAGH,OAAO,CAAC,iBAAD,CAAvB;;AACA,IAAMI,SAAS,GAAGJ,OAAO,CAAC,oBAAD,CAAP,CAA8BG,OAA9B,CAAlB;;AACA,IAAME,QAAQ,GAAGL,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAMM,YAAY,GAAGN,OAAO,CAAC,eAAD,CAA5B;;AAEA,IAAMO,GAAG,GAAGP,OAAO,CAAC,SAAD,CAAnB;;AACA,IAAMQ,SAAS,GAAGR,OAAO,CAAC,iBAAD,CAAzB;;AACA,IAAMS,YAAY,GAAGT,OAAO,CAAC,8BAAD,CAA5B;;AAEA,IAAMU,WAAW,GAAGV,OAAO,CAAC,gBAAD,CAA3B;;AACA,IAAMW,WAAW,GAAGX,OAAO,CAAC,eAAD,CAA3B;;AAEA,IAAMY,GAAG,GAAGb,OAAO,EAAnB;AAEAF,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAU,SAAS;AAET,IAAMK,WAAW,GAAG;AAClBC,EAAAA,MAAM,EAAE,uBADU;AAElBC,EAAAA,WAAW,EAAE;AAFK,CAApB;AAKAH,GAAG,CAACI,GAAJ,CAAQd,IAAI,CAACW,WAAD,CAAZ;AACAD,GAAG,CAACI,GAAJ,CAAQjB,OAAO,CAACkB,IAAR,EAAR;AACAL,GAAG,CAACI,GAAJ,CAAQjB,OAAO,CAACmB,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAP,GAAG,CAACI,GAAJ,CAAQV,YAAY,CAACC,GAAG,CAACa,kBAAL,CAApB;AACAR,GAAG,CAACI,GAAJ,CAAQb,OAAO,CAAC;AACdkB,EAAAA,KAAK,EAAE,eAACC,GAAD,EAAS;AACdzB,IAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYwB,GAAG,CAACC,SAAhB;AACA,WAAOd,YAAY,EAAnB,CAHc,CAGS;AACxB,GALa;AAMde,EAAAA,KAAK,EAAE,IAAIpB,SAAJ,EANO;AAOdqB,EAAAA,MAAM,EAAElB,GAAG,CAACa,kBAPE;AAQdM,EAAAA,MAAM,EAAE,KARM;AASdC,EAAAA,iBAAiB,EAAE,IATL;AAUdC,EAAAA,MAAM,EAAE;AAAEC,IAAAA,MAAM,EAAE;AAAV;AAVM,CAAD,CAAf;AAYAjB,GAAG,CAACI,GAAJ,CAAQX,QAAQ,CAACyB,UAAT,EAAR;AACAlB,GAAG,CAACI,GAAJ,CAAQX,QAAQ,CAACF,OAAT,EAAR;AAEAS,GAAG,CAACI,GAAJ,CAAQ,OAAR,EAAiBL,WAAjB;AACAC,GAAG,CAACI,GAAJ,CAAQ,QAAR,EAAkBN,WAAlB;AAEAE,GAAG,CAACmB,GAAJ,CAAQ,MAAR,EAAgBxB,GAAG,CAACyB,IAApB;AAEA,IAAMC,MAAM,GAAGhC,IAAI,CAACiC,YAAL,CAAkBtB,GAAlB,CAAf;AAEAf,OAAO,CAACC,GAAR;AACAmC,MAAM,CAACE,MAAP,CAAc5B,GAAG,CAACyB,IAAlB;AAEAI,MAAM,CAACC,OAAP,GAAiBzB,GAAjB","sourcesContent":["console.log('lecture server');\nconst express = require('express');\nconst http = require('http');\nconst cors = require('cors');\nconst session = require('express-session');\nconst FileStore = require('session-file-store')(session);\nconst passport = require('passport');\nconst cookieParser = require('cookie-parser');\n\nconst env = require('./const');\nconst scheduler = require('./mail/timer.js');\nconst id_generator = require('./custom_module/id_generator');\n\nconst adminRouter = require('./routes/admin');\nconst usersRouter = require('./routes/user');\n\nconst app = express();\n\nconsole.log('Starting scheduler');\nscheduler();\n\nconst corsOptions = {\n  origin: 'http://localhost:3000',\n  credentials: true,\n};\n\napp.use(cors(corsOptions));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser(env.session_secret_key));\napp.use(session({\n  genid: (req) => {\n    console.log('Inside the session middleware');\n    console.log(req.sessionID);\n    return id_generator(); // use UUIDs for session IDs\n  },\n  store: new FileStore(),\n  secret: env.session_secret_key,\n  resave: false,\n  saveUninitialized: true,\n  cookie: { maxAge: 2419200000 },\n}));\napp.use(passport.initialize());\napp.use(passport.session());\n\napp.use('/user', usersRouter);\napp.use('/admin', adminRouter);\n\napp.set('port', env.port);\n\nconst server = http.createServer(app);\n\nconsole.log(`server starting on port: 4200`);\nserver.listen(env.port);\n\nmodule.exports = app;\n"],"file":"app.js"}