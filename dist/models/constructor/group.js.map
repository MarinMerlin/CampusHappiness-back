{"version":3,"sources":["../../../models/constructor/group.js"],"names":["Sequelize","require","id_generator","groupConstructor","sequelize","Group","define","id","allowNull","type","STRING","primaryKey","sondage_id","name","timestamps","addGroup","Promise","resolve","sync","then","create","updateGroup","group_id","newSondage","update","where","module","exports"],"mappings":";;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,IAAMC,YAAY,GAAGD,OAAO,CAAC,kCAAD,CAA5B;;AAEA,IAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAUC,SAAV,EAAqB;AAC5C,MAAMC,KAAK,GAAGD,SAAS,CAACE,MAAV,CAAiB,OAAjB,EAA0B;AACtCC,IAAAA,EAAE,EAAE;AACFC,MAAAA,SAAS,EAAE,KADT;AAEFC,MAAAA,IAAI,EAAET,SAAS,CAACU,MAFd;AAGFC,MAAAA,UAAU,EAAE;AAHV,KADkC;AAMtCC,IAAAA,UAAU,EAAE;AACVJ,MAAAA,SAAS,EAAE,KADD;AAEVC,MAAAA,IAAI,EAAET,SAAS,CAACU;AAFN,KAN0B;AAUtCG,IAAAA,IAAI,EAAE;AACJL,MAAAA,SAAS,EAAE,KADP;AAEJC,MAAAA,IAAI,EAAET,SAAS,CAACU;AAFZ;AAVgC,GAA1B,EAcX;AACDI,IAAAA,UAAU,EAAE;AADX,GAdW,CAAd;;AAiBAT,EAAAA,KAAK,CAACU,QAAN,GAAiB,UAAUH,UAAV,EAAsBC,IAAtB,EAAiD;AAAA,QAArBN,EAAqB,uEAAhBL,YAAY,EAAI;AAChE,WAAO,IAAIc,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpCZ,MAAAA,KAAK,CAACa,IAAN,GAAaC,IAAb,CAAkB,YAAM;AACtBd,QAAAA,KAAK,CAACe,MAAN,CAAa;AACXb,UAAAA,EAAE,EAAEA,EADO;AAEXK,UAAAA,UAAU,EAAEA,UAFD;AAGXC,UAAAA,IAAI,EAAEA;AAHK,SAAb,EAIGM,IAJH,CAIQ,YAAM;AACZF,UAAAA,OAAO;AACR,SAND;AAOD,OARD;AASD,KAVM,CAAP;AAWD,GAZD;;AAcAZ,EAAAA,KAAK,CAACgB,WAAN,GAAoB,UAAUC,QAAV,EAAoBC,UAApB,EAAgC;AAClDlB,IAAAA,KAAK,CAACmB,MAAN,CACE;AAAEZ,MAAAA,UAAU,EAAEW;AAAd,KADF,EAEE;AAAEE,MAAAA,KAAK,EAAE;AAAElB,QAAAA,EAAE,EAAEe;AAAN;AAAT,KAFF;AAID,GALD;;AAMA,SAAOjB,KAAP;AACD,CAvCD;;AAyCAqB,MAAM,CAACC,OAAP,GAAiBxB,gBAAjB","sourcesContent":["const Sequelize = require('sequelize');\nconst id_generator = require('../../custom_module/id_generator');\n\nconst groupConstructor = function (sequelize) {\n  const Group = sequelize.define('group', {\n    id: {\n      allowNull: false,\n      type: Sequelize.STRING,\n      primaryKey: true,\n    },\n    sondage_id: {\n      allowNull: false,\n      type: Sequelize.STRING,\n    },\n    name: {\n      allowNull: false,\n      type: Sequelize.STRING,\n    },\n  }, {\n    timestamps: false,\n  });\n  Group.addGroup = function (sondage_id, name, id = id_generator()) {\n    return new Promise(function (resolve) {\n      Group.sync().then(() => {\n        Group.create({\n          id: id,\n          sondage_id: sondage_id,\n          name: name,\n        }).then(() => {\n          resolve();\n        });\n      });\n    });\n  };\n\n  Group.updateGroup = function (group_id, newSondage) {\n    Group.update(\n      { sondage_id: newSondage },\n      { where: { id: group_id } },\n    );\n  };\n  return Group;\n};\n\nmodule.exports = groupConstructor;"],"file":"group.js"}