{"version":3,"sources":["../../../models/constructor/post.js"],"names":["Sequelize","require","id_generator","defaultImageURL","postConstructor","sequelize","Post","define","id","allowNull","type","STRING","primaryKey","title","text","TEXT","imageURL","linkURL","timestamps","addPost","post","Promise","resolve","sync","then","create","module","exports"],"mappings":";;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,IAAMC,YAAY,GAAGD,OAAO,CAAC,kCAAD,CAA5B;;AAEA,IAAME,eAAe,GAAG,0KAAxB;;AACA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAUC,SAAV,EAAqB;AAC3C,MAAMC,IAAI,GAAGD,SAAS,CAACE,MAAV,CAAiB,MAAjB,EAAyB;AACpCC,IAAAA,EAAE,EAAE;AACFC,MAAAA,SAAS,EAAE,KADT;AAEFC,MAAAA,IAAI,EAAEV,SAAS,CAACW,MAFd;AAGFC,MAAAA,UAAU,EAAE;AAHV,KADgC;AAMpCC,IAAAA,KAAK,EAAE;AACLJ,MAAAA,SAAS,EAAE,KADN;AAELC,MAAAA,IAAI,EAAEV,SAAS,CAACW;AAFX,KAN6B;AAUpCG,IAAAA,IAAI,EAAE;AACJL,MAAAA,SAAS,EAAE,KADP;AAEJC,MAAAA,IAAI,EAAEV,SAAS,CAACe;AAFZ,KAV8B;AAcpCC,IAAAA,QAAQ,EAAE;AACRP,MAAAA,SAAS,EAAE,KADH;AAERC,MAAAA,IAAI,EAAEV,SAAS,CAACW;AAFR,KAd0B;AAkBpCM,IAAAA,OAAO,EAAE;AACPR,MAAAA,SAAS,EAAE,IADJ;AAEPC,MAAAA,IAAI,EAAEV,SAAS,CAACe;AAFT;AAlB2B,GAAzB,EAsBV;AACDG,IAAAA,UAAU,EAAE;AADX,GAtBU,CAAb;;AA0BAZ,EAAAA,IAAI,CAACa,OAAL,GAAe,UAAUC,IAAV,EAAgB;AAC7B,WAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpC,UAAI,CAACF,IAAI,CAACJ,QAAV,EAAoB;AAClBI,QAAAA,IAAI,CAACJ,QAAL,GAAgBb,eAAhB;AACD;;AACDG,MAAAA,IAAI,CAACiB,IAAL,GAAYC,IAAZ,CAAiB,YAAM;AACrBlB,QAAAA,IAAI,CAACmB,MAAL,CAAY;AACVjB,UAAAA,EAAE,EAAEN,YAAY,EADN;AAEVW,UAAAA,KAAK,EAAEO,IAAI,CAACP,KAFF;AAGVC,UAAAA,IAAI,EAAEM,IAAI,CAACN,IAHD;AAIVE,UAAAA,QAAQ,EAAEI,IAAI,CAACJ,QAJL;AAKVC,UAAAA,OAAO,EAAEG,IAAI,CAACH;AALJ,SAAZ,EAMGO,IANH,CAMQ,YAAM;AACZF,UAAAA,OAAO;AACR,SARD;AASD,OAVD;AAWD,KAfM,CAAP;AAgBD,GAjBD;;AAkBA,SAAOhB,IAAP;AACD,CA9CD;;AAgDAoB,MAAM,CAACC,OAAP,GAAiBvB,eAAjB","sourcesContent":["const Sequelize = require('sequelize');\nconst id_generator = require('../../custom_module/id_generator');\n\nconst defaultImageURL = \"https://images.unsplash.com/photo-1504465039710-0f49c0a47eb7?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=2a9b2c6e54342b63487ce461a5ee9872&auto=format&fit=crop&w=675&q=80\";\nconst postConstructor = function (sequelize) {\n  const Post = sequelize.define('post', {\n    id: {\n      allowNull: false,\n      type: Sequelize.STRING,\n      primaryKey: true,\n    },\n    title: {\n      allowNull: false,\n      type: Sequelize.STRING,\n    },\n    text: {\n      allowNull: false,\n      type: Sequelize.TEXT,\n    },\n    imageURL: {\n      allowNull: false,\n      type: Sequelize.STRING,\n    },\n    linkURL: {\n      allowNull: true,\n      type: Sequelize.TEXT,\n    },\n  }, {\n    timestamps: false,\n  });\n\n  Post.addPost = function (post) {\n    return new Promise(function (resolve) {\n      if (!post.imageURL) {\n        post.imageURL = defaultImageURL;\n      }\n      Post.sync().then(() => {\n        Post.create({\n          id: id_generator(),\n          title: post.title,\n          text: post.text,\n          imageURL: post.imageURL,\n          linkURL: post.linkURL,\n        }).then(() => {\n          resolve();\n        });\n      });\n    });\n  };\n  return Post;\n};\n\nmodule.exports = postConstructor;"],"file":"post.js"}