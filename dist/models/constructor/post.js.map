{"version":3,"sources":["../../../models/constructor/post.js"],"names":["Sequelize","require","id_generator","defaultImageURL","postConstructor","sequelize","Post","define","id","allowNull","type","STRING","primaryKey","title","text","imageURL","timestamps","addPost","post","Promise","resolve","sync","then","create","module","exports"],"mappings":";;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,IAAMC,YAAY,GAAGD,OAAO,CAAC,kCAAD,CAA5B;;AAEA,IAAME,eAAe,GAAG,0KAAxB;;AACA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAUC,SAAV,EAAqB;AAC3C,MAAMC,IAAI,GAAGD,SAAS,CAACE,MAAV,CAAiB,MAAjB,EAAyB;AACpCC,IAAAA,EAAE,EAAE;AACFC,MAAAA,SAAS,EAAE,KADT;AAEFC,MAAAA,IAAI,EAAEV,SAAS,CAACW,MAFd;AAGFC,MAAAA,UAAU,EAAE;AAHV,KADgC;AAMpCC,IAAAA,KAAK,EAAE;AACLJ,MAAAA,SAAS,EAAE,KADN;AAELC,MAAAA,IAAI,EAAEV,SAAS,CAACW;AAFX,KAN6B;AAUpCG,IAAAA,IAAI,EAAE;AACJL,MAAAA,SAAS,EAAE,KADP;AAEJC,MAAAA,IAAI,EAAEV,SAAS,CAACW;AAFZ,KAV8B;AAcpCI,IAAAA,QAAQ,EAAE;AACRN,MAAAA,SAAS,EAAE,KADH;AAERC,MAAAA,IAAI,EAAEV,SAAS,CAACW;AAFR;AAd0B,GAAzB,EAkBV;AACDK,IAAAA,UAAU,EAAE;AADX,GAlBU,CAAb;;AAsBAV,EAAAA,IAAI,CAACW,OAAL,GAAe,UAAUC,IAAV,EAAgB;AAC7B,WAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpC,UAAI,CAACF,IAAI,CAACH,QAAV,EAAoB;AAClBG,QAAAA,IAAI,CAACH,QAAL,GAAgBZ,eAAhB;AACD;;AACDG,MAAAA,IAAI,CAACe,IAAL,GAAYC,IAAZ,CAAiB,YAAM;AACrBhB,QAAAA,IAAI,CAACiB,MAAL,CAAY;AACVf,UAAAA,EAAE,EAAEN,YAAY,EADN;AAEVW,UAAAA,KAAK,EAAEK,IAAI,CAACL,KAFF;AAGVC,UAAAA,IAAI,EAAEI,IAAI,CAACJ,IAHD;AAIVC,UAAAA,QAAQ,EAAEG,IAAI,CAACH;AAJL,SAAZ,EAKGO,IALH,CAKQ,YAAM;AACZF,UAAAA,OAAO;AACR,SAPD;AAQD,OATD;AAUD,KAdM,CAAP;AAeD,GAhBD;;AAiBA,SAAOd,IAAP;AACD,CAzCD;;AA2CAkB,MAAM,CAACC,OAAP,GAAiBrB,eAAjB","sourcesContent":["const Sequelize = require('sequelize');\nconst id_generator = require('../../custom_module/id_generator');\n\nconst defaultImageURL = \"https://images.unsplash.com/photo-1504465039710-0f49c0a47eb7?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=2a9b2c6e54342b63487ce461a5ee9872&auto=format&fit=crop&w=675&q=80\";\nconst postConstructor = function (sequelize) {\n  const Post = sequelize.define('post', {\n    id: {\n      allowNull: false,\n      type: Sequelize.STRING,\n      primaryKey: true,\n    },\n    title: {\n      allowNull: false,\n      type: Sequelize.STRING,\n    },\n    text: {\n      allowNull: false,\n      type: Sequelize.STRING,\n    },\n    imageURL: {\n      allowNull: false,\n      type: Sequelize.STRING,\n    },\n  }, {\n    timestamps: false,\n  });\n\n  Post.addPost = function (post) {\n    return new Promise(function (resolve) {\n      if (!post.imageURL) {\n        post.imageURL = defaultImageURL;\n      }\n      Post.sync().then(() => {\n        Post.create({\n          id: id_generator(),\n          title: post.title,\n          text: post.text,\n          imageURL: post.imageURL,\n        }).then(() => {\n          resolve();\n        });\n      });\n    });\n  };\n  return Post;\n};\n\nmodule.exports = postConstructor;"],"file":"post.js"}