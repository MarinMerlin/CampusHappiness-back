{"version":3,"sources":["../../../models/constructor/keyword.js"],"names":["Sequelize","require","id_generator","keywordConstructor","sequelize","Keyword","define","id","allowNull","type","STRING","primaryKey","name","timestamps","addKeyword","Promise","resolve","sync","then","findOrCreate","where","defaults","spread","keyword","dataValues","module","exports"],"mappings":";;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,WAAD,CAAzB;;AACA,IAAMC,YAAY,GAAGD,OAAO,CAAC,kCAAD,CAA5B;;AAEA,IAAME,kBAAkB,GAAG,SAArBA,kBAAqB,CAAUC,SAAV,EAAqB;AAC9C,MAAMC,OAAO,GAAGD,SAAS,CAACE,MAAV,CAAiB,SAAjB,EAA4B;AAC1CC,IAAAA,EAAE,EAAE;AACFC,MAAAA,SAAS,EAAE,KADT;AAEFC,MAAAA,IAAI,EAAET,SAAS,CAACU,MAFd;AAGFC,MAAAA,UAAU,EAAE;AAHV,KADsC;AAM1CC,IAAAA,IAAI,EAAE;AACJJ,MAAAA,SAAS,EAAE,KADP;AAEJC,MAAAA,IAAI,EAAET,SAAS,CAACU;AAFZ;AANoC,GAA5B,EAUb;AACDG,IAAAA,UAAU,EAAE;AADX,GAVa,CAAhB;;AAaAR,EAAAA,OAAO,CAACS,UAAR,GAAqB,UAAUF,IAAV,EAAgB;AAAE;AACrC,WAAO,IAAIG,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpCX,MAAAA,OAAO,CAACY,IAAR,GAAeC,IAAf,CAAoB,YAAM;AACxBb,QAAAA,OAAO,CAACc,YAAR,CAAqB;AACnBC,UAAAA,KAAK,EAAE;AAAER,YAAAA,IAAI,EAAEA;AAAR,WADY;AAEnBS,UAAAA,QAAQ,EAAE;AAAET,YAAAA,IAAI,EAAEA,IAAR;AAAcL,YAAAA,EAAE,EAAEL,YAAY;AAA9B;AAFS,SAArB,EAGGoB,MAHH,CAGU,UAACC,OAAD,EAAa;AACrBP,UAAAA,OAAO,CAACO,OAAO,CAACC,UAAT,CAAP;AACD,SALD;AAMD,OAPD;AAQD,KATM,CAAP;AAUD,GAXD;;AAYA,SAAOnB,OAAP;AACD,CA3BD;;AA6BAoB,MAAM,CAACC,OAAP,GAAiBvB,kBAAjB","sourcesContent":["const Sequelize = require('sequelize');\nconst id_generator = require('../../custom_module/id_generator');\n\nconst keywordConstructor = function (sequelize) {\n  const Keyword = sequelize.define('keyword', {\n    id: {\n      allowNull: false,\n      type: Sequelize.STRING,\n      primaryKey: true,\n    },\n    name: {\n      allowNull: false,\n      type: Sequelize.STRING,\n    },\n  }, {\n    timestamps: false,\n  });\n  Keyword.addKeyword = function (name) { // id optionnal\n    return new Promise(function (resolve) {\n      Keyword.sync().then(() => {\n        Keyword.findOrCreate({ \n          where: { name: name },\n          defaults: { name: name, id: id_generator() },\n        }).spread((keyword) => {\n          resolve(keyword.dataValues);\n        });\n      });\n    });\n  };\n  return Keyword;\n};\n\nmodule.exports = keywordConstructor;"],"file":"keyword.js"}