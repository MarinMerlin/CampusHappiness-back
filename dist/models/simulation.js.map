{"version":3,"sources":["../../models/simulation.js"],"names":["Models","require","id_generator","clearTables","env","Sondage","User","Reponse","Question","Remplissage","JourSondage","Keyword","Group","Post","simulationTime","simulationDay","Date","setDate","getDate","groupIds","sondageIds","fakeSurvey","name","thematiqueList","questionList","text","keyWord","fakeSurvey2","userList","firstName","lastName","pseudo","email","password","rand","max","Math","floor","random","randRep","date","diff","round","now","i","incrementDay","addManyUsers","userNumber","Promise","resolve","promiseArray","user","length","push","addUser","all","then","fakeSurvey_id","questionIdList","getQuestionIdList","fakeSurveyId1","fakeSurveyId2","findAll","where","sondage_id","questions","forEach","question","id","console","log","questions2","question2","answerSondage_simulation","fake_answer","remplissage_id","answered_questions","answered_commentaires","question_id","answer","answerSondage","answerUserListSondage_simulation","users","create","date_emmission","nombre_emission","dataValues","group","find","jourSondage","increment","answerAll","include","model","firstDay","sondage_id2","addSondage","addGroup","findOne","updateSondage","addKeyword","day","numberAddeduser","Alldays","compteur","count","sum","post_number","fake_post","title","linkURL","postPromiseArray","index","addPost"],"mappings":";;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,SAAD,CAAtB;;AACA,IAAMC,YAAY,GAAGD,OAAO,CAAC,+BAAD,CAA5B;;AACA,IAAME,WAAW,GAAGF,OAAO,CAAC,SAAD,CAA3B;;AACA,IAAMG,GAAG,GAAGH,OAAO,CAAC,UAAD,CAAnB;;IAGEI,O,GACEL,M,CADFK,O;IAASC,I,GACPN,M,CADOM,I;IAAMC,O,GACbP,M,CADaO,O;IAASC,Q,GACtBR,M,CADsBQ,Q;IAAUC,W,GAChCT,M,CADgCS,W;IAAaC,W,GAC7CV,M,CAD6CU,W;IAAaC,O,GAC1DX,M,CAD0DW,O;IAASC,K,GACnEZ,M,CADmEY,K;IAAOC,I,GAC1Eb,M,CAD0Ea,I;AAG9E,IAAMC,cAAc,GAAG,EAAvB;AACA,IAAMC,aAAa,GAAG,IAAIC,IAAJ,EAAtB;AACAD,aAAa,CAACE,OAAd,CAAsBF,aAAa,CAACG,OAAd,KAA0BJ,cAAhD;AAEA,IAAMK,QAAQ,GAAG,CAACjB,YAAY,EAAb,EAAiBA,YAAY,EAA7B,CAAjB;AACA,IAAMkB,UAAU,GAAG,CAAClB,YAAY,EAAb,EAAiBA,YAAY,EAA7B,CAAnB;AACA,IAAMmB,UAAU,GAAG;AACjBC,EAAAA,IAAI,EAAE,sBADW;AAEjBC,EAAAA,cAAc,EAAE,CACd;AACED,IAAAA,IAAI,EAAE,WADR;AAEEE,IAAAA,YAAY,EAAE,CACZ;AACEC,MAAAA,IAAI,EAAE,+BADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KADY,EAKZ;AACED,MAAAA,IAAI,EAAE,0BADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KALY,EASZ;AACED,MAAAA,IAAI,EAAE,wBADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KATY,EAaZ;AACED,MAAAA,IAAI,EAAE,uBADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KAbY,EAiBZ;AACED,MAAAA,IAAI,EAAE,0BADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KAjBY,EAqBZ;AACED,MAAAA,IAAI,EAAE,yBADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KArBY;AAFhB,GADc,EA8Bd;AACEJ,IAAAA,IAAI,EAAE,QADR;AAEEE,IAAAA,YAAY,EAAE,CACZ;AACEC,MAAAA,IAAI,EAAE,sCADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KADY,EAKZ;AACED,MAAAA,IAAI,EAAE,+BADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KALY,EASZ;AACED,MAAAA,IAAI,EAAE,wBADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KATY,EAaZ;AACED,MAAAA,IAAI,EAAE,6BADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KAbY,EAiBZ;AACED,MAAAA,IAAI,EAAE,UADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KAjBY,EAqBZ;AACED,MAAAA,IAAI,EAAE,eADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KArBY;AAFhB,GA9Bc,EA2Dd;AACEJ,IAAAA,IAAI,EAAE,iBADR;AAEEE,IAAAA,YAAY,EAAE,CACZ;AACEC,MAAAA,IAAI,EAAE,0BADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KADY,EAKZ;AACED,MAAAA,IAAI,EAAE,mCADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KALY,EASZ;AACED,MAAAA,IAAI,EAAE,yBADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KATY;AAFhB,GA3Dc;AAFC,CAAnB;AAiFA,IAAMC,WAAW,GAAG;AAClBL,EAAAA,IAAI,EAAE,OADY;AAElBC,EAAAA,cAAc,EAAE,CACd;AACED,IAAAA,IAAI,EAAE,cADR;AAEEE,IAAAA,YAAY,EAAE,CACZ;AACEC,MAAAA,IAAI,EAAE,8BADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KADY,EAKZ;AACED,MAAAA,IAAI,EAAE,2BADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KALY,EASZ;AACED,MAAAA,IAAI,EAAE,wBADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KATY,EAaZ;AACED,MAAAA,IAAI,EAAE,6BADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KAbY,EAiBZ;AACED,MAAAA,IAAI,EAAE,+BADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KAjBY,EAqBZ;AACED,MAAAA,IAAI,EAAE,yBADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KArBY;AAFhB,GADc,EA8Bd;AACEJ,IAAAA,IAAI,EAAE,aADR;AAEEE,IAAAA,YAAY,EAAE,CACZ;AACEC,MAAAA,IAAI,EAAE,0BADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KADY,EAKZ;AACED,MAAAA,IAAI,EAAE,mCADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KALY,EASZ;AACED,MAAAA,IAAI,EAAE,yBADR;AAEEC,MAAAA,OAAO,EAAE;AAFX,KATY;AAFhB,GA9Bc;AAFE,CAApB;AAoDA,IAAME,QAAQ,GAAG,CACf;AACEC,EAAAA,SAAS,EAAE,MADb;AAEEC,EAAAA,QAAQ,EAAE,QAFZ;AAGEC,EAAAA,MAAM,EAAE,MAHV;AAIEC,EAAAA,KAAK,EAAE,wBAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CADe,EAQf;AACEJ,EAAAA,SAAS,EAAE,SADb;AAEEC,EAAAA,QAAQ,EAAE,OAFZ;AAGEC,EAAAA,MAAM,EAAE,SAHV;AAIEC,EAAAA,KAAK,EAAE,0BAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CARe,EAef;AACEJ,EAAAA,SAAS,EAAE,MADb;AAEEC,EAAAA,QAAQ,EAAE,cAFZ;AAGEC,EAAAA,MAAM,EAAE,MAHV;AAIEC,EAAAA,KAAK,EAAE,8BAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CAfe,EAsBf;AACEJ,EAAAA,SAAS,EAAE,QADb;AAEEC,EAAAA,QAAQ,EAAE,SAFZ;AAGEC,EAAAA,MAAM,EAAE,QAHV;AAIEC,EAAAA,KAAK,EAAE,2BAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CAtBe,EA6Bf;AACEJ,EAAAA,SAAS,EAAE,KADb;AAEEC,EAAAA,QAAQ,EAAE,UAFZ;AAGEC,EAAAA,MAAM,EAAE,KAHV;AAIEC,EAAAA,KAAK,EAAE,yBAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CA7Be,EAoCf;AACEJ,EAAAA,SAAS,EAAE,SADb;AAEEC,EAAAA,QAAQ,EAAE,KAFZ;AAGEC,EAAAA,MAAM,EAAE,SAHV;AAIEC,EAAAA,KAAK,EAAE,wBAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CApCe,EA2Cf;AACEJ,EAAAA,SAAS,EAAE,MADb;AAEEC,EAAAA,QAAQ,EAAE,QAFZ;AAGEC,EAAAA,MAAM,EAAE,MAHV;AAIEC,EAAAA,KAAK,EAAE,wBAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CA3Ce,EAkDf;AACEJ,EAAAA,SAAS,EAAE,QADb;AAEEC,EAAAA,QAAQ,EAAE,UAFZ;AAGEC,EAAAA,MAAM,EAAE,QAHV;AAIEC,EAAAA,KAAK,EAAE,4BAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CAlDe,EAyDf;AACEJ,EAAAA,SAAS,EAAE,OADb;AAEEC,EAAAA,QAAQ,EAAE,QAFZ;AAGEC,EAAAA,MAAM,EAAE,OAHV;AAIEC,EAAAA,KAAK,EAAE,yBAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CAzDe,EAgEf;AACEJ,EAAAA,SAAS,EAAE,OADb;AAEEC,EAAAA,QAAQ,EAAE,QAFZ;AAGEC,EAAAA,MAAM,EAAE,OAHV;AAIEC,EAAAA,KAAK,EAAE,yBAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CAhEe,EAuEf;AACEJ,EAAAA,SAAS,EAAE,QADb;AAEEC,EAAAA,QAAQ,EAAE,SAFZ;AAGEC,EAAAA,MAAM,EAAE,QAHV;AAIEC,EAAAA,KAAK,EAAE,2BAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CAvEe,EA8Ef;AACEJ,EAAAA,SAAS,EAAE,MADb;AAEEC,EAAAA,QAAQ,EAAE,SAFZ;AAGEC,EAAAA,MAAM,EAAE,MAHV;AAIEC,EAAAA,KAAK,EAAE,yBAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CA9Ee,EAqFf;AACEJ,EAAAA,SAAS,EAAE,OADb;AAEEC,EAAAA,QAAQ,EAAE,UAFZ;AAGEC,EAAAA,MAAM,EAAE,OAHV;AAIEC,EAAAA,KAAK,EAAE,2BAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CArFe,EA4Ff;AACEJ,EAAAA,SAAS,EAAE,SADb;AAEEC,EAAAA,QAAQ,EAAE,QAFZ;AAGEC,EAAAA,MAAM,EAAE,SAHV;AAIEC,EAAAA,KAAK,EAAE,2BAJT;AAKEC,EAAAA,QAAQ,EAAE;AALZ,CA5Fe,CAAjB;;AAqGA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAAUC,GAAV,EAAe;AAC1B,SAAOC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBF,IAAI,CAACC,KAAL,CAAWF,GAAX,CAA3B,CAAP;AACD,CAFD;;AAIA,IAAMI,OAAO,GAAG,SAAVA,OAAU,CAAUC,IAAV,EAAgB;AAC9B,MAAMC,IAAI,GAAG3B,cAAc,GAAGsB,IAAI,CAACM,KAAL,CAAW,CAAC1B,IAAI,CAAC2B,GAAL,KAAaH,IAAd,KAAuB,OAAO,EAAP,GAAY,EAAZ,GAAiB,EAAxC,CAAX,CAA9B;AACA,MAAMI,CAAC,GAAGV,IAAI,CAAC,EAAD,CAAJ,GAAWA,IAAI,CAACO,IAAD,CAAzB;;AACA,MAAIG,CAAC,IAAI,CAAL,IAAUA,CAAC,IAAI,EAAnB,EAAuB;AACrB,WAAQ,CAAC,CAAT;AACD;;AAAC,MAAIA,CAAC,IAAI,EAAL,IAAWA,CAAC,IAAI,EAApB,EAAwB;AACxB,WAAQ,CAAR;AACD;;AAAC,MAAIA,CAAC,IAAI,EAAT,EAAa;AACb,WAAQ,CAAR;AACD;AACF,CAVD;;AAYA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAY;AAC/B9B,EAAAA,aAAa,CAACE,OAAd,CAAsBF,aAAa,CAACG,OAAd,KAA0B,CAAhD;AACD,CAFD;;AAIA,IAAM4B,YAAY,GAAG,SAAfA,YAAe,CAAUC,UAAV,EAAsB;AACzC,SAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpC,QAAIF,UAAU,GAAG,CAAjB,EAAoB;AAClB,UAAMG,YAAY,GAAG,EAArB;;AACA,WAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGG,UAApB,EAAgCH,CAAC,EAAjC,EAAqC;AACnC,YAAMO,IAAI,GAAGvB,QAAQ,CAACM,IAAI,CAACN,QAAQ,CAACwB,MAAV,CAAL,CAArB;AACAF,QAAAA,YAAY,CAACG,IAAb,CAAkB/C,IAAI,CAACgD,OAAL,CAAaH,IAAI,CAACtB,SAAlB,EAA6BsB,IAAI,CAACrB,QAAlC,EAA4CqB,IAAI,CAACnB,KAAjD,EAAwDmB,IAAI,CAACpB,MAA7D,EAAqEoB,IAAI,CAAClB,QAA1E,EAAoF,CAApF,EAAuFd,QAAQ,CAACe,IAAI,CAAC,CAAD,CAAL,CAA/F,CAAlB;AACD;;AACDc,MAAAA,OAAO,CAACO,GAAR,CAAYL,YAAZ,EAA0BM,IAA1B,CAA+BP,OAA/B;AACD,KAPD,MAOO;AACLA,MAAAA,OAAO;AACR;AACF,GAXM,CAAP;AAYD,CAbD;;AAeA,IAAMQ,aAAa,GAAG,IAAtB;AACA,IAAMC,cAAc,GAAG,EAAvB;;AAEA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAUC,aAAV,EAAyBC,aAAzB,EAAwC;AAChE,SAAO,IAAIb,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpCzC,IAAAA,QAAQ,CAACsD,OAAT,CAAiB;AAAEC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,UAAU,EAAEJ;AAAd;AAAT,KAAjB,EAA2DJ,IAA3D,CAAgE,UAACS,SAAD,EAAe;AAC7EP,MAAAA,cAAc,CAACE,aAAD,CAAd,GAAgC,EAAhC;AACAK,MAAAA,SAAS,CAACC,OAAV,CAAkB,UAACC,QAAD,EAAc;AAC9BT,QAAAA,cAAc,CAACE,aAAD,CAAd,CAA8BP,IAA9B,CAAmCc,QAAQ,CAACC,EAA5C;AACD,OAFD;AAGAC,MAAAA,OAAO,CAACC,GAAR,CAAY,4CAAZ,EAA0DZ,cAAc,CAACE,aAAD,CAAd,CAA8BR,MAAxF,EAAgG,IAAhG,EAAsGa,SAAS,CAACb,MAAhH;AACA5C,MAAAA,QAAQ,CAACsD,OAAT,CAAiB;AAAEC,QAAAA,KAAK,EAAE;AAAEC,UAAAA,UAAU,EAAEH;AAAd;AAAT,OAAjB,EAA2DL,IAA3D,CAAgE,UAACe,UAAD,EAAgB;AAC9Eb,QAAAA,cAAc,CAACG,aAAD,CAAd,GAAgC,EAAhC;AACAU,QAAAA,UAAU,CAACL,OAAX,CAAmB,UAACM,SAAD,EAAe;AAChCd,UAAAA,cAAc,CAACG,aAAD,CAAd,CAA8BR,IAA9B,CAAmCmB,SAAS,CAACJ,EAA7C;AACD,SAFD;AAGAC,QAAAA,OAAO,CAACC,GAAR,CAAY,4CAAZ,EAA0DZ,cAAc,CAACG,aAAD,CAAd,CAA8BT,MAAxF,EAAgG,IAAhG,EAAsGmB,UAAU,CAACnB,MAAjH;AACAH,QAAAA,OAAO;AACR,OAPD;AAQD,KAdD;AAeD,GAhBM,CAAP;AAiBD,CAlBD;;AAoBA,IAAMwB,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAUtB,IAAV,EAAgBX,IAAhB,EAAsBwB,UAAtB,EAAkC;AACjE,SAAO,IAAIhB,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpC,QAAMyB,WAAW,GAAG;AAClBC,MAAAA,cAAc,EAAEzE,YAAY,EADV;AAElB8D,MAAAA,UAAU,EAAEA,UAFM;AAGlBY,MAAAA,kBAAkB,EAAE,EAHF;AAIlBC,MAAAA,qBAAqB,EAAE;AAJL,KAApB;AAMAnB,IAAAA,cAAc,CAACM,UAAD,CAAd,CAA2BE,OAA3B,CAAmC,UAACY,WAAD,EAAiB;AAClDJ,MAAAA,WAAW,CAACE,kBAAZ,CAA+BvB,IAA/B,CAAoC;AAClCyB,QAAAA,WAAW,EAAEA,WADqB;AAElCC,QAAAA,MAAM,EAAExC,OAAO,CAACC,IAAD;AAFmB,OAApC;AAID,KALD;AAMAW,IAAAA,IAAI,CAAC6B,aAAL,CAAmBN,WAAnB,EAAgClC,IAAhC,EAAsCgB,IAAtC,CAA2C,YAAM;AAC/CP,MAAAA,OAAO;AACR,KAFD;AAGD,GAhBM,CAAP;AAiBD,CAlBD;;AAoBA,IAAMgC,gCAAgC,GAAG,SAAnCA,gCAAmC,CAAUC,KAAV,EAAiB1C,IAAjB,EAAuB;AAC9D,SAAO,IAAIQ,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpCoB,IAAAA,OAAO,CAACC,GAAR,CAAYvD,aAAZ,EAA2B,KAA3B,EAAkCyB,IAAlC;AACA,QAAMU,YAAY,GAAG,EAArB;AACAxC,IAAAA,WAAW,CAACyE,MAAZ,CAAmB;AACjBf,MAAAA,EAAE,EAAElE,YAAY,EADC;AAEjBkF,MAAAA,cAAc,EAAErE,aAFC;AAGjBiD,MAAAA,UAAU,EAAE5C,UAAU,CAAC,CAAD,CAHL;AAIjBiE,MAAAA,eAAe,EAAE;AAJA,KAAnB,EAKG7B,IALH,CAKQ,YAAM;AACZ9C,MAAAA,WAAW,CAACyE,MAAZ,CAAmB;AACjBf,QAAAA,EAAE,EAAElE,YAAY,EADC;AAEjBkF,QAAAA,cAAc,EAAErE,aAFC;AAGjBiD,QAAAA,UAAU,EAAE5C,UAAU,CAAC,CAAD,CAHL;AAIjBiE,QAAAA,eAAe,EAAE;AAJA,OAAnB,EAKG7B,IALH,CAKQ,YAAM;AACZ0B,QAAAA,KAAK,CAAChB,OAAN,CAAc,UAACf,IAAD,EAAU;AACtB,cAAMa,UAAU,GAAGb,IAAI,CAACmC,UAAL,CAAgBC,KAAhB,CAAsBD,UAAtB,CAAiCtB,UAApD;AACAtD,UAAAA,WAAW,CAAC8E,IAAZ,CAAiB;AACfzB,YAAAA,KAAK,EAAE;AAAEC,cAAAA,UAAU,EAAEA,UAAd;AAA0BoB,cAAAA,cAAc,EAAErE;AAA1C;AADQ,WAAjB,EAEGyC,IAFH,CAEQ,UAACiC,WAAD,EAAiB;AACvB,gBAAIvD,IAAI,CAAC,CAAD,CAAJ,KAAY,CAAhB,EAAmB;AACjBgB,cAAAA,YAAY,CAACG,IAAb,CAAkBoB,wBAAwB,CAACtB,IAAD,EAAOX,IAAP,EAAawB,UAAb,CAA1C;AACD;;AACDyB,YAAAA,WAAW,CAACC,SAAZ,CAAsB;AAAEL,cAAAA,eAAe,EAAE;AAAnB,aAAtB;AACD,WAPD;AAQD,SAVD;AAWArC,QAAAA,OAAO,CAACO,GAAR,CAAYL,YAAZ,EAA0BM,IAA1B,CAA+B,YAAM;AACnCP,UAAAA,OAAO;AACR,SAFD;AAGD,OApBD;AAqBD,KA3BD;AA4BD,GA/BM,CAAP;AAgCD,CAjCD;;AAmCA,IAAM0C,SAAS,GAAG,SAAZA,SAAY,GAAY;AAC5B,SAAO,IAAI3C,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpC3C,IAAAA,IAAI,CAACwD,OAAL,CAAa;AAAE8B,MAAAA,OAAO,EAAE,CAAC;AAAEC,QAAAA,KAAK,EAAEjF;AAAT,OAAD;AAAX,KAAb,EAA8C4C,IAA9C,CAAmD,UAAC0B,KAAD,EAAW;AAC5DD,MAAAA,gCAAgC,CAACC,KAAD,EAAQnE,aAAR,CAAhC,CAAuDyC,IAAvD,CAA4D,YAAM;AAChEP,QAAAA,OAAO;AACR,OAFD;AAGD,KAJD;AAKD,GANM,CAAP;AAOD,CARD;;AAUA,IAAM6C,QAAQ,GAAG,SAAXA,QAAW,GAAY;AAC3B,SAAO,IAAI9C,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpC,QAAMe,UAAU,GAAG5C,UAAU,CAAC,CAAD,CAA7B;AACA,QAAM2E,WAAW,GAAG3E,UAAU,CAAC,CAAD,CAA9B;AACAf,IAAAA,OAAO,CAAC2F,UAAR,CAAmBhC,UAAnB,EAA+B,OAA/B,EAAwChD,IAAI,CAAC2B,GAAL,EAAxC,EAAoDtB,UAAU,CAACC,IAA/D,EAAqEkC,IAArE,CAA0E,YAAM;AAC9EnD,MAAAA,OAAO,CAAC2F,UAAR,CAAmBD,WAAnB,EAAgC,OAAhC,EAAyC/E,IAAI,CAAC2B,GAAL,EAAzC,EAAqDhB,WAAW,CAACL,IAAjE,EAAuEkC,IAAvE,CAA4E,YAAM;AAChF5C,QAAAA,KAAK,CAACqF,QAAN,CAAejC,UAAf,EAA2B,aAA3B,EAA0C7C,QAAQ,CAAC,CAAD,CAAlD,EAAuDqC,IAAvD,CAA4D,YAAM;AAChE5C,UAAAA,KAAK,CAACqF,QAAN,CAAeF,WAAf,EAA4B,QAA5B,EAAsC5E,QAAQ,CAAC,CAAD,CAA9C,EAAmDqC,IAAnD,CAAwD,YAAM;AAC5DlD,YAAAA,IAAI,CAACgD,OAAL,CAAa,OAAb,EAAsB,OAAtB,EAA+B,uBAA/B,EAAwD,OAAxD,EAAiE,KAAjE,EAAwE,CAAxE,EAA2EnC,QAAQ,CAAC,CAAD,CAAnF,EAAwFqC,IAAxF,CAA6F,YAAM;AACjGV,cAAAA,YAAY,CAAC,EAAD,CAAZ,CAAiBU,IAAjB,CAAsB,YAAM;AAC1BlD,gBAAAA,IAAI,CAAC4F,OAAL,CAAa;AAAEnC,kBAAAA,KAAK,EAAE;AAAEhC,oBAAAA,MAAM,EAAE;AAAV;AAAT,iBAAb,EAA6CyB,IAA7C,CAAkD,UAACL,IAAD,EAAU;AAC1DA,kBAAAA,IAAI,CAACgD,aAAL,CAAmB9E,UAAnB,EAA+B2C,UAA/B,EAA2CR,IAA3C,CAAgD,YAAM;AACpDL,oBAAAA,IAAI,CAACgD,aAAL,CAAmBxE,WAAnB,EAAgCoE,WAAhC,EAA6CvC,IAA7C,CAAkD,YAAM;AACtD7C,sBAAAA,OAAO,CAACyF,UAAR,CAAmB,SAAnB;AACAzF,sBAAAA,OAAO,CAACyF,UAAR,CAAmB,SAAnB;AACAzF,sBAAAA,OAAO,CAACyF,UAAR,CAAmB,OAAnB;AACAzF,sBAAAA,OAAO,CAACyF,UAAR,CAAmB,MAAnB;AACAzF,sBAAAA,OAAO,CAACyF,UAAR,CAAmB,UAAnB;AACAzF,sBAAAA,OAAO,CAACyF,UAAR,CAAmB,YAAnB;AACAzF,sBAAAA,OAAO,CAACyF,UAAR,CAAmB,UAAnB;AACAzF,sBAAAA,OAAO,CAACyF,UAAR,CAAmB,aAAnB;AACAzF,sBAAAA,OAAO,CAACyF,UAAR,CAAmB,SAAnB;AACAzC,sBAAAA,iBAAiB,CAACK,UAAD,EAAa+B,WAAb,CAAjB,CAA2CvC,IAA3C,CAAgD,YAAM;AACpDmC,wBAAAA,SAAS,GAAGnC,IAAZ,CAAiB,YAAM;AACrBX,0BAAAA,YAAY;AACZI,0BAAAA,OAAO;AACR,yBAHD;AAID,uBALD;AAMD,qBAhBD;AAiBD,mBAlBD;AAmBD,iBApBD;AAqBD,eAtBD;AAuBD,aAxBD;AAyBD,WA1BD;AA2BD,SA5BD;AA6BD,OA9BD;AA+BD,KAhCD;AAiCD,GApCM,CAAP;AAqCD,CAtCD;;AAwCA,IAAMoD,GAAG,GAAG,SAANA,GAAM,CAAUC,eAAV,EAA2B;AACrC,SAAO,IAAItD,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AACpCH,IAAAA,YAAY,CAACwD,eAAD,CAAZ,CAA8B9C,IAA9B,CAAmC,YAAM;AACvCmC,MAAAA,SAAS,GAAGnC,IAAZ,CAAiB,YAAM;AACrBX,QAAAA,YAAY;AACZI,QAAAA,OAAO;AACR,OAHD;AAID,KALD;AAMD,GAPM,CAAP;AAQD,CATD;;AAWA,IAAMsD,OAAO,GAAG,SAAVA,OAAU,CAAUC,QAAV,EAAoB;AAClC,MAAIA,QAAQ,KAAK,CAAjB,EAAoB;AAClBnC,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACAhE,IAAAA,IAAI,CAACmG,KAAL,GAAajD,IAAb,CAAkB,UAACkD,GAAD,EAAS;AACzBrC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBoC,GAAtB;AACD,KAFD;AAGAjG,IAAAA,WAAW,CAACgG,KAAZ,GAAoBjD,IAApB,CAAyB,UAACkD,GAAD,EAAS;AAChCrC,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BoC,GAA7B;AACD,KAFD;AAGAnG,IAAAA,OAAO,CAACkG,KAAR,GAAgBjD,IAAhB,CAAqB,UAACkD,GAAD,EAAS;AAC5BrC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BoC,GAA1B;AACD,KAFD;AAGD,GAXD,MAWO;AACLF,IAAAA,QAAQ;AACRnC,IAAAA,OAAO,CAACC,GAAR,CAAYkC,QAAZ;;AACA,QAAIA,QAAQ,IAAI,EAAhB,EAAoB;AAClBH,MAAAA,GAAG,CAACnE,IAAI,CAAC,CAAD,CAAL,CAAH,CAAasB,IAAb,CAAkB,YAAM;AACtB+C,QAAAA,OAAO,CAACC,QAAD,CAAP;AACD,OAFD;AAGD,KAJD,MAIO;AACLH,MAAAA,GAAG,CAACnE,IAAI,CAAC,CAAD,CAAL,CAAH,CAAasB,IAAb,CAAkB,YAAM;AACtB+C,QAAAA,OAAO,CAACC,QAAD,CAAP;AACD,OAFD;AAGD;AACF;AACF,CAzBD;;AA2BArG,WAAW,GAAGqD,IAAd,CAAmB,YAAM;AACvBa,EAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAY,4CAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAY,EAAZ;AACAwB,EAAAA,QAAQ,GAAGtC,IAAX,CAAgB,YAAM;AACpB+C,IAAAA,OAAO,CAACzF,cAAD,CAAP;AACD,GAFD;AAGD,CAPD;AASA,IAAM6F,WAAW,GAAG,CAApB;AACA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,KAAK,EAAE,aADS;AAEhBpF,EAAAA,IAAI,EAAE,6aAFU;AAGhBqF,EAAAA,OAAO,EAAE;AAHO,CAAlB;AAMAzC,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,IAAMyC,gBAAgB,GAAG,EAAzB;;AACA,KAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG,CAA5B,EAA+BA,KAAK,EAApC,EAAwC;AACtCD,EAAAA,gBAAgB,CAAC1D,IAAjB,CAAsBxC,IAAI,CAACoG,OAAL,CAAaL,SAAb,CAAtB;AACD;;AACD5D,OAAO,CAACO,GAAR,CAAYwD,gBAAZ,EAA8BvD,IAA9B,CAAmC,YAAM;AACvCa,EAAAA,OAAO,CAACC,GAAR,CAAYqC,WAAZ,EAAyB,cAAzB;AACD,CAFD","sourcesContent":["const Models = require(\"./index\");\nconst id_generator = require('../custom_module/id_generator');\nconst clearTables = require('./setup');\nconst env = require(\"../const\");\n\nconst { \n  Sondage, User, Reponse, Question, Remplissage, JourSondage, Keyword, Group, Post,\n} = Models;\n\nconst simulationTime = 35;\nconst simulationDay = new Date();\nsimulationDay.setDate(simulationDay.getDate() - simulationTime);\n\nconst groupIds = [id_generator(), id_generator()];\nconst sondageIds = [id_generator(), id_generator()];\nconst fakeSurvey = {\n  name: 'Condition de travail',\n  thematiqueList: [\n    {\n      name: 'Cafétaria',\n      questionList: [\n        {\n          text: 'Le repas était-il convenable?',\n          keyWord: 'Qualité',\n        },\n        {\n          text: \"Comment était l'attente?\",\n          keyWord: 'Attente',\n        },\n        {\n          text: 'Etait-ce trop bryuant?',\n          keyWord: 'Bruit',\n        },\n        {\n          text: 'Le prix convenait il?',\n          keyWord: 'Prix',\n        },\n        {\n          text: \"Propreté de la cafeteria\",\n          keyWord: 'Propreté',\n        },\n        {\n          text: \"Propreté des sanitaires\",\n          keyWord: 'propreté',\n        },\n      ],\n    },\n    {\n      name: 'Bureau',\n      questionList: [\n        {\n          text: \"Avez vous été productif aujourd'hui?\",\n          keyWord: 'Productivité',\n        },\n        {\n          text: 'Comment était la température?',\n          keyWord: 'Température',\n        },\n        {\n          text: 'Etait-ce trop bryuant?',\n          keyWord: 'Bruit',\n        },\n        {\n          text: 'Votre bureau était il sale?',\n          keyWord: 'Propreté',\n        },\n        {\n          text: 'Ambiance',\n          keyWord: 'Ambiance',\n        },\n        {\n          text: 'Le materielle',\n          keyWord: 'Materielle',\n        },\n      ],\n    },\n    {\n      name: 'Espace de repos',\n      questionList: [\n        {\n          text: 'Le lieux était il propre',\n          keyWord: 'Propreté',\n        },\n        {\n          text: \"L'ambiance était elle convenable?\",\n          keyWord: 'Ambiance',\n        },\n        {\n          text: 'Temperature convenable?',\n          keyWord: 'Temperature',\n        },\n      ],\n    },\n  ],\n};\n\nconst fakeSurvey2 = {\n  name: 'Cours',\n  thematiqueList: [\n    {\n      name: 'Amphithéatre',\n      questionList: [\n        {\n          text: 'Les sièges sont confortable?',\n          keyWord: 'Confort',\n        },\n        {\n          text: \"Le cours était trop long?\",\n          keyWord: 'Attente',\n        },\n        {\n          text: 'Etait-ce trop bryuant?',\n          keyWord: 'Bruit',\n        },\n        {\n          text: 'Le cours était intéressant?',\n          keyWord: 'Qualité',\n        },\n        {\n          text: \"Propreté de la l'amphithéatre\",\n          keyWord: 'Propreté',\n        },\n        {\n          text: \"Propreté des sanitaires\",\n          keyWord: 'propreté',\n        },\n      ],\n    },\n    {\n      name: 'Salle de TD',\n      questionList: [\n        {\n          text: 'Le lieux était il propre',\n          keyWord: 'Propreté',\n        },\n        {\n          text: \"L'ambiance était elle convenable?\",\n          keyWord: 'Ambiance',\n        },\n        {\n          text: 'Temperature convenable?',\n          keyWord: 'Temperature',\n        },\n      ],\n    },\n  ],\n};\n\nconst userList = [\n  {\n    firstName: \"Jean\",\n    lastName: \"Michel\",\n    pseudo: \"Jean\",\n    email: \"jean.michel@supukec.fr\",\n    password: \"michel\",\n  },\n  {\n    firstName: \"Charles\",\n    lastName: \"Henry\",\n    pseudo: \"Charles\",\n    email: \"charles.henry@supukec.fr\",\n    password: \"henry\",\n  },\n  {\n    firstName: \"John\",\n    lastName: \"Michelangelo\",\n    pseudo: \"John\",\n    email: \"john.michelangelo@supukec.fr\",\n    password: \"michelangelo\",\n  },\n  {\n    firstName: \"Martin\",\n    lastName: \"Mystère\",\n    pseudo: \"Martin\",\n    email: \"martin.mystere@supukec.fr\",\n    password: \"mystere\",\n  },\n  {\n    firstName: \"Bob\",\n    lastName: \"Laiponje\",\n    pseudo: \"Bob\",\n    email: \"bob.laiponje@supukec.fr\",\n    password: \"laiponje\",\n  },\n  {\n    firstName: \"Jacques\",\n    lastName: \"Adi\",\n    pseudo: \"Jacques\",\n    email: \"jacques.adi@supukec.fr\",\n    password: \"adi\",\n  },\n  {\n    firstName: \"Jean\",\n    lastName: \"Michel\",\n    pseudo: \"Jean\",\n    email: \"jean.michel@supukec.fr\",\n    password: \"michel\",\n  },\n  {\n    firstName: \"Goerge\",\n    lastName: \"Michaels\",\n    pseudo: \"Goerge\",\n    email: \"goerge.michaels@supukec.fr\",\n    password: \"michaels\",\n  },\n  {\n    firstName: \"Merin\",\n    lastName: \"Marlin\",\n    pseudo: \"merin\",\n    email: \"merin.marlin@supukec.fr\",\n    password: \"marlin\",\n  },\n  {\n    firstName: \"Marie\",\n    lastName: \"Jeanne\",\n    pseudo: \"Marie\",\n    email: \"marie.jeanne@supukec.fr\",\n    password: \"jeanne\",\n  },\n  {\n    firstName: \"Claire\",\n    lastName: \"Dejager\",\n    pseudo: \"Claire\",\n    email: \"claire.dejager@supukec.fr\",\n    password: \"dejager\",\n  },\n  {\n    firstName: \"Anne\",\n    lastName: \"Collins\",\n    pseudo: \"Anne\",\n    email: \"anne.collins@supukec.fr\",\n    password: \"anne\",\n  },\n  {\n    firstName: \"Laure\",\n    lastName: \"Bailleul\",\n    pseudo: \"laure\",\n    email: \"laure.bailleul@supukec.fr\",\n    password: \"bailleul\",\n  },\n  {\n    firstName: \"Camille\",\n    lastName: \"Oswald\",\n    pseudo: \"Camille\",\n    email: \"camille.oswald@supukec.fr\",\n    password: \"oswald\",\n  },\n];\n\nconst rand = function (max) {\n  return Math.floor(Math.random() * Math.floor(max));\n};\n\nconst randRep = function (date) {\n  const diff = simulationTime - Math.round((Date.now() - date) / (1000 * 60 * 60 * 24));\n  const i = rand(44) + rand(diff);\n  if (i >= 0 && i <= 14) {\n    return (-1);\n  } if (i >= 15 && i <= 29) {\n    return (0);\n  } if (i >= 29) {\n    return (1);\n  } \n};\n\nconst incrementDay = function () {\n  simulationDay.setDate(simulationDay.getDate() + 1);\n};\n\nconst addManyUsers = function (userNumber) {\n  return new Promise(function (resolve) {\n    if (userNumber > 0) {\n      const promiseArray = [];\n      for (let i = 0; i < userNumber; i++) {\n        const user = userList[rand(userList.length)];\n        promiseArray.push(User.addUser(user.firstName, user.lastName, user.email, user.pseudo, user.password, 0, groupIds[rand(2)]));\n      }\n      Promise.all(promiseArray).then(resolve);\n    } else {\n      resolve();\n    }\n  });\n};\n\nconst fakeSurvey_id = null;\nconst questionIdList = {};\n\nconst getQuestionIdList = function (fakeSurveyId1, fakeSurveyId2) {\n  return new Promise(function (resolve) {\n    Question.findAll({ where: { sondage_id: fakeSurveyId1 } }).then((questions) => {\n      questionIdList[fakeSurveyId1] = [];\n      questions.forEach((question) => {\n        questionIdList[fakeSurveyId1].push(question.id);\n      });\n      console.log(\"nombre de question dans la base de donnée:\", questionIdList[fakeSurveyId1].length, \"  \", questions.length);\n      Question.findAll({ where: { sondage_id: fakeSurveyId2 } }).then((questions2) => {\n        questionIdList[fakeSurveyId2] = [];\n        questions2.forEach((question2) => {\n          questionIdList[fakeSurveyId2].push(question2.id);\n        });\n        console.log(\"nombre de question dans la base de donnée:\", questionIdList[fakeSurveyId2].length, \"  \", questions2.length);\n        resolve();\n      });\n    });\n  });\n};\n\nconst answerSondage_simulation = function (user, date, sondage_id) {\n  return new Promise(function (resolve) {\n    const fake_answer = {\n      remplissage_id: id_generator(),\n      sondage_id: sondage_id,\n      answered_questions: [],\n      answered_commentaires: [],\n    };\n    questionIdList[sondage_id].forEach((question_id) => {\n      fake_answer.answered_questions.push({\n        question_id: question_id,\n        answer: randRep(date),\n      });\n    });\n    user.answerSondage(fake_answer, date).then(() => {\n      resolve();\n    });\n  });\n};\n\nconst answerUserListSondage_simulation = function (users, date) {\n  return new Promise(function (resolve) {\n    console.log(simulationDay, \" / \", date);\n    const promiseArray = [];\n    JourSondage.create({\n      id: id_generator(), \n      date_emmission: simulationDay, \n      sondage_id: sondageIds[0], \n      nombre_emission: 0,\n    }).then(() => {\n      JourSondage.create({\n        id: id_generator(), \n        date_emmission: simulationDay, \n        sondage_id: sondageIds[1], \n        nombre_emission: 0,\n      }).then(() => {\n        users.forEach((user) => {\n          const sondage_id = user.dataValues.group.dataValues.sondage_id;\n          JourSondage.find({ \n            where: { sondage_id: sondage_id, date_emmission: simulationDay },\n          }).then((jourSondage) => {\n            if (rand(3) !== 0) {\n              promiseArray.push(answerSondage_simulation(user, date, sondage_id));\n            }\n            jourSondage.increment({ nombre_emission: 1 });\n          });\n        });\n        Promise.all(promiseArray).then(() => {\n          resolve();\n        });\n      });\n    });\n  });\n};\n\nconst answerAll = function () {\n  return new Promise(function (resolve) {\n    User.findAll({ include: [{ model: Group }] }).then((users) => {\n      answerUserListSondage_simulation(users, simulationDay).then(() => {\n        resolve();\n      });\n    });\n  });\n};\n\nconst firstDay = function () {\n  return new Promise(function (resolve) {\n    const sondage_id = sondageIds[0];\n    const sondage_id2 = sondageIds[1];\n    Sondage.addSondage(sondage_id, 'Admin', Date.now(), fakeSurvey.name).then(() => {\n      Sondage.addSondage(sondage_id2, 'Admin', Date.now(), fakeSurvey2.name).then(() => {\n        Group.addGroup(sondage_id, 'Professeurs', groupIds[0]).then(() => {\n          Group.addGroup(sondage_id2, 'Eleves', groupIds[1]).then(() => {\n            User.addUser('Admin', 'Admin', 'admin.admin@gmail.com', 'Admin', 'mdp', 1, groupIds[0]).then(() => {\n              addManyUsers(10).then(() => {\n                User.findOne({ where: { pseudo: 'Admin' } }).then((user) => {\n                  user.updateSondage(fakeSurvey, sondage_id).then(() => {\n                    user.updateSondage(fakeSurvey2, sondage_id2).then(() => {\n                      Keyword.addKeyword(\"Qualité\");\n                      Keyword.addKeyword(\"Attente\");\n                      Keyword.addKeyword(\"Bruit\");\n                      Keyword.addKeyword(\"Prix\");\n                      Keyword.addKeyword(\"Propreté\");\n                      Keyword.addKeyword(\"Materielle\");\n                      Keyword.addKeyword(\"Ambiance\");\n                      Keyword.addKeyword(\"Température\");\n                      Keyword.addKeyword(\"Confort\");\n                      getQuestionIdList(sondage_id, sondage_id2).then(() => {\n                        answerAll().then(() => { \n                          incrementDay();\n                          resolve(); \n                        }); \n                      });\n                    });\n                  });\n                });\n              });\n            });\n          });\n        });\n      });\n    });\n  });\n};\n\nconst day = function (numberAddeduser) {\n  return new Promise(function (resolve) {\n    addManyUsers(numberAddeduser).then(() => {\n      answerAll().then(() => {\n        incrementDay();\n        resolve();\n      });\n    });\n  });\n};\n\nconst Alldays = function (compteur) {\n  if (compteur === 0) {\n    console.log(' -- fin --');\n    User.count().then((sum) => {\n      console.log(\"user :\", sum);\n    });\n    Remplissage.count().then((sum) => {\n      console.log(\"remplissage :\", sum);\n    });\n    Reponse.count().then((sum) => {\n      console.log(\"reponses :\", sum);\n    });\n  } else {\n    compteur--;\n    console.log(compteur);\n    if (compteur <= 15) {\n      day(rand(2)).then(() => {\n        Alldays(compteur);\n      });\n    } else {\n      day(rand(5)).then(() => {\n        Alldays(compteur);\n      });\n    }\n  }\n};\n\nclearTables().then(() => {\n  console.log(\"\");\n  console.log(\"------------------------------------------\");\n  console.log(\"\");\n  firstDay().then(() => {\n    Alldays(simulationTime);\n  });\n});\n\nconst post_number = 6;\nconst fake_post = {\n  title: \"Good News !\",\n  text: \"Et quia Montius inter dilancinantium manus spiritum efflaturus Epigonum et Eusebium nec professionem nec dignitatem ostendens aliquotiens increpabat, qui sint hi magna quaerebatur industria, et nequid intepesceret, Epigonus e Lycia philosophus ducitur et Eusebius ab Emissa Pittacas cognomento, concitatus orator, cum quaestor non hos sed tribunos fabricarum insimulasset promittentes armorum si novas res agitari conperissent.\",\n  linkURL: 'https://fr.wikipedia.org/wiki/Vincent_Martin',\n};\n\nconsole.log(\"Adding posts ...\");\nconst postPromiseArray = [];\nfor (let index = 0; index < 6; index++) {\n  postPromiseArray.push(Post.addPost(fake_post));\n}\nPromise.all(postPromiseArray).then(() => {\n  console.log(post_number, \" Posts added\");\n});"],"file":"simulation.js"}