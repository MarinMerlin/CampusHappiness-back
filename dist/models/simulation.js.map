{"version":3,"sources":["../../models/simulation.js"],"names":["Models","require","id_generator","Sondage","Thematique","User","Reponse","Question","Remplissage","Admin","JourSondage","Commentaire","startYear","startMonth","startDay","dayDuration","alert","message","console","log","fakeSurvey","name","thematiqueList","questionList","text","keyWord","simulationDay","Date","addFirstAdmin","Promise","resolve","sync","then","create","id","pseudo","salt","hash","createdAt","addManyUsers","userNumber","firstName","lastName","email","addTenUsers","all","firstAdminCreateSurvey","findOne","admin","createSondage"],"mappings":"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","sourcesContent":["const Models = require(\"./index\");\nconst id_generator = require('../custom_module/id_generator');\n\nconst { \n  Sondage, Thematique, User, Reponse, Question, Remplissage, Admin, JourSondage, Commentaire,\n} = Models;\n\nconst startYear = 2018;\nconst startMonth = 1;\nconst startDay = 1;\nconst dayDuration = 30;\n\nconst alert = function (message) {\n  console.log(\"\");\n  console.log(\"******************************************\");\n  console.log(` ------------------ ${message} ------------------`);\n  console.log(\"******************************************\");\n  console.log(\"\");\n};\n\nconst fakeSurvey = {\n  name: 'simulation_survey',\n  thematiqueList: [\n    {\n      name: 'simulation_thematique 1',\n      questionList: [\n        {\n          text: 'th1 question1',\n          keyWord: 'q1',\n        },\n        {\n          text: 'th1 question2',\n          keyWord: 'q2',\n        },\n        {\n          text: 'th1 question3',\n          keyWord: 'q3',\n        },\n      ],\n    },\n    {\n      name: 'simulation_thematique 2',\n      questionList: [\n        {\n          text: 'th2 question1',\n          keyWord: 'q1',\n        },\n        {\n          text: 'th2 question2',\n          keyWord: 'q2',\n        },\n      ],\n    },\n  ],\n};\n\nconst simulationDay = new Date(startYear, startMonth, startDay);\n\n// first day, add 1 admin, 10 users and 1 survey\nconst addFirstAdmin = new Promise(function (resolve) {\n  Admin.sync().then(() => {\n    Admin.create({\n      id: 'admin_simulation_id',\n      pseudo: 'admin_simulation_pseudo',\n      salt: 'admin_simulation_pseudo',\n      hash: 'admin_simulation_pseudo',\n      createdAt: simulationDay,\n    }).then(() => {\n      resolve();\n    });\n  });\n});\n\n\nconst addManyUsers = function (userNumber, resolve) {\n  if (userNumber === 0) {\n    resolve();\n  } else {\n    User.sync().then(() => {\n      User.create({\n        id: id_generator(),\n        firstName: \"user_simulation_fn\",\n        lastName: \"user_simulation_ln\",\n        email: \"user_simulation_email\",\n      }).then(() => {\n        userNumber -= 1;\n        addManyUsers(userNumber, resolve);\n      });\n    });\n  }\n};\n\nconst addTenUsers = new Promise(function (resolve) {\n  addManyUsers(10, resolve);\n});\n\nPromise.all([addFirstAdmin, addTenUsers]).then(() => {\n  alert(\"admin et 10 ut\");\n  \n  const firstAdminCreateSurvey = new Promise(function (resolve) {\n    Admin.findOne({ pseudo: 'Vince' }).then((admin) => {\n      admin.createSondage(fakeSurvey, () => {\n        resolve();\n      });\n    });\n  });\n});\n"],"file":"simulation.js"}