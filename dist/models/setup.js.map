{"version":3,"sources":["../../models/setup.js"],"names":["Models","require","Sondage","Thematique","User","Reponse","Question","Remplissage","JourSondage","Commentaire","Keyword","Group","creationTable","Promise","resolveAll","sync","force","then","create","id","author","createdAt","Date","now","name","sondage_id","firstName","lastName","email","pseudo","salt","hash","auth","photo","lastMailDate","mailIntensity","group_id","date_emmission","nombre_emission","valeur","thematique_id","keyWord","user_id","date","remplissage_id","commentaire","question_id","console","log","suppressionTables","commentaireDel","resolve","drop","reponseDel","jourSondageDel","keywordDel","all","questionDel","remplissageDel","thematiqueDel","userDel","setupTables","delReponse","findOne","elem","destroy","delKeyword","delCommentaire","delJourSondage","delQuestion","delRemplissage","delThematique","delSondage","delUser","delGroup","clearTable","promises","push","module","exports"],"mappings":"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","sourcesContent":["const Models = require(\"./index\");\n\nconst { \n  Sondage, Thematique, User, Reponse, Question, Remplissage, JourSondage, Commentaire, Keyword, Group,\n} = Models;\n\nconst creationTable = function () {\n  return new Promise(function (resolveAll) {\n    Sondage.sync({ force: true }).then(() => {\n      Sondage.create({\n        id: \"fake_sondage_id\",\n        author: \"fake_author\",\n        createdAt: Date.now(),\n        name: \"fake_name\",\n      });\n    }).then(() => {\n      Group.sync({ force: true }).then(() => {\n        Group.create({\n          id: \"fake_group_id\",\n          name: \"fake_group_name\",\n          sondage_id: \"fake_sondage_id\",\n        });\n      }).then(() => {\n        User.sync({ force: true }).then(() => {\n          User.create({\n            id: \"fake_user_id\",\n            firstName: \"fake_first_name\",\n            lastName: \"fake_last_name\",\n            email: \"fake_user_email@fake_mail.bite\",\n            pseudo: \"fake_pseudo\",\n            salt: \"fake_salt\",\n            hash: \"fake_hash\",\n            auth: 0,\n            photo: \"./public/user/photo/default.jpg\",\n            lastMailDate: Date.now(),\n            mailIntensity: 1,\n            group_id: 'fake_group_id',\n          });\n        }).then(() => {\n          JourSondage.sync({ force: true }).then(() => {\n            JourSondage.create({\n              id: \"fake_jour_sondage_id\",\n              sondage_id: \"fake_sondage_id\",\n              date_emmission: Date.now(),\n              nombre_emission: 1,\n            });\n          });\n          Thematique.sync({ force: true }).then(() => {\n            Thematique.create({\n              id: \"fake_thematique_id\",\n              name: \"fake_name\",\n            });\n          }).then(() => {\n            Question.sync({ force: true }).then(() => {\n              Question.create({\n                id: \"fake_question_id\",\n                sondage_id: \"fake_sondage_id\",\n                valeur: \"fake_question\",\n                thematique_id: \"fake_thematique_id\",\n                keyWord: \"fake_keyWord\",\n              });\n            }).then(() => {\n              Remplissage.sync({ force: true }).then(() => {\n                Remplissage.create({\n                  id: \"fake_remplissage_id\",\n                  sondage_id: \"fake_sondage_id\",\n                  user_id: \"fake_user_id\",\n                  date: Date.now(),\n                });\n              }).then(() => {\n                Commentaire.sync({ force: true }).then(() => {\n                  Commentaire.create({\n                    id: \"fake_commentaire_id\",\n                    remplissage_id: \"fake_remplissage_id\",\n                    thematique_id: \"fake_thematique_id\",\n                    commentaire: \"fake_commentaire\",\n                  });\n                }).then(() => {\n                  Reponse.sync({ force: true }).then(() => {\n                    Reponse.create({\n                      id: \"fake_reponse_id\",\n                      remplissage_id: \"fake_remplissage_id\",\n                      question_id: \"fake_question_id\",\n                      valeur: 0,\n                    });\n                  }).then(() => {\n                    Keyword.sync({ force: true }).then(() => {\n                      Keyword.create({\n                        id: \"fake_keyword_id\",\n                        name: \"fake_keyword_name\",\n                      });\n                    }).then(() => {\n                      console.log(\"tables créées\");\n                      resolveAll();\n                    });\n                  });\n                });\n              });\n            });\n          });\n        });\n      });\n    });\n  });\n};\n\nconst suppressionTables = function () {\n  return new Promise(function (resolveAll) {\n    const commentaireDel = new Promise(function (resolve) {\n      Commentaire.drop().then(() => {\n        resolve();\n      });\n    });\n      \n    const reponseDel = new Promise(function (resolve) {\n      Reponse.drop().then(() => {\n        resolve();\n      });\n    });\n      \n    const jourSondageDel = new Promise(function (resolve) {\n      JourSondage.drop().then(() => {\n        resolve();\n      });\n    });\n\n    const keywordDel = new Promise(function (resolve) {\n      Keyword.drop().then(() => {\n        resolve();\n      });\n    });\n      \n    Promise.all([commentaireDel, reponseDel, jourSondageDel, keywordDel]).then(() => {\n      const questionDel = new Promise(function (resolve) {\n        Question.drop().then(() => {\n          resolve();\n        });\n      });\n      const remplissageDel = new Promise(function (resolve) {\n        Remplissage.drop().then(() => {\n          resolve();\n        });\n      });\n      Promise.all([questionDel, remplissageDel]).then(() => {\n        const thematiqueDel = new Promise(function (resolve) {\n          Thematique.drop().then(() => {\n            resolve();\n          });\n        });\n        const userDel = new Promise(function (resolve) {\n          User.drop().then(() => {\n            resolve();\n          });\n        });\n        Promise.all([thematiqueDel, userDel]).then(() => {\n          Group.drop().then(() => {\n            Sondage.drop().then(() => {\n              console.log(\" -- anciennes tables supprimées --\");\n              resolveAll();\n            });\n          });\n        });\n      });\n    });\n  });\n};\n\nconst setupTables = function () {\n  return new Promise(function (resolve) {\n    suppressionTables().then(() => {\n      creationTable().then(() => {\n        resolve();\n      });\n    });\n  });\n};\n\nconst delReponse = function () {\n  return new Promise(function (resolve) {\n    Reponse.findOne().then((elem) => {\n      elem.destroy().then(resolve);\n    });\n  });\n};\n\nconst delKeyword = function () {\n  return new Promise(function (resolve) {\n    Keyword.findOne().then((elem) => {\n      elem.destroy().then(resolve);\n    });\n  });\n};\n\nconst delCommentaire = function () {\n  return new Promise(function (resolve) {\n    Commentaire.findOne().then((elem) => {\n      elem.destroy().then(resolve);\n    });\n  });\n};\n\nconst delJourSondage = function () {\n  return new Promise(function (resolve) {\n    JourSondage.findOne().then((elem) => {\n      elem.destroy().then(resolve);\n    });\n  });\n};\n\nconst delQuestion = function () {\n  return new Promise(function (resolve) {\n    Question.findOne().then((elem) => {\n      elem.destroy().then(resolve);\n    });\n  });\n};\nconst delRemplissage = function () {\n  return new Promise(function (resolve) {\n    Remplissage.findOne().then((elem) => {\n      elem.destroy().then(resolve);\n    });\n  });\n};\n\nconst delThematique = function () {\n  return new Promise(function (resolve) {\n    Thematique.findOne().then((elem) => {\n      elem.destroy().then(resolve);\n    });\n  });\n};\nconst delSondage = function () {\n  return new Promise(function (resolve) {\n    Sondage.findOne().then((elem) => {\n      elem.destroy().then(resolve);\n    });\n  });\n};\n\nconst delUser = function () {\n  return new Promise(function (resolve) {\n    User.findOne().then((elem) => {\n      elem.destroy().then(resolve);\n    });\n  });\n};\n\nconst delGroup = function () {\n  return new Promise(function (resolve) {\n    Group.findOne().then((elem) => {\n      elem.destroy().then(resolve);\n    });\n  });\n};\n\nconst clearTable = function () {\n  return new Promise(function (resolve) {\n    setupTables().then(() => {\n      let promises = [];\n      promises.push(delReponse(), delCommentaire(), delJourSondage(), delKeyword());\n      Promise.all(promises).then(() => {\n        promises = [delQuestion(), delRemplissage()];\n        Promise.all(promises).then(() => {\n          promises = [delUser()];\n          Promise.all(promises).then(() => {\n            promises = [delGroup()];\n            Promise.all(promises).then(() => {\n              promises = [delThematique(), delSondage()];\n              Promise.all(promises).then(() => {\n                console.log(\"Tables nettoyées\");\n                resolve();\n              });\n            });\n          });\n        });\n      });\n    });\n  });\n};\n\nmodule.exports = clearTable;"],"file":"setup.js"}