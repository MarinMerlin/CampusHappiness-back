{"version":3,"sources":["../../routes/admin.js"],"names":["express","require","router","Router","bodyParser","use","json","urlencoded","extended","morgan","Models","req","res","next","url","isAuthenticated","status","message","user","auth","post","promises","body","userList","forEach","authValue","admin","push","User","addUser","firstName","lastName","email","pseudo","password","Promise","all","then","findAll","allUserData","userArray","dataValues","id","group_id","success","get","Sondage","findOne","sondage","Group","addGroup","groupName","selectedUsers","promise","resolve","check","update","selectedGroup","where","getSondage","sondageList","getGroups","groupList","console","log","createSondage","sondageId","send","sondage_id","sondage_name","findById","getCommentairesJour","params","jour","comments","getStatistics","statisticTab","getStatisticsSpecific","sondageResult","Keyword","keywords","keywordList","keyword","name","addKeyword","Post","addPost","module","exports"],"mappings":"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","sourcesContent":["const express = require('express');\n\nconst router = express.Router();\n\n// Le body Parser permet d'acceder aux variable envoyés dans le body\nconst bodyParser = require('body-parser');\n\nrouter.use(bodyParser.json());\nrouter.use(express.urlencoded({ extended: false }));\n\nconst morgan = require('morgan');\n\n// Récupère les models\nconst Models = require('../models/index');\n\nrouter.use(morgan('dev'));\n\nrouter.use((req, res, next) => {\n  if (req.url === '/login') {\n    next();\n  } else if (!req.isAuthenticated()) {\n    res.status(401).json({ message: 'Not logged in' });\n  } else if (req.user.auth !== 1) {\n    res.status(401).json({ message: 'Not authorized' });\n  } else {\n    next();\n  }\n});\n\n// --------- Routes protegées par token -------------\n\n// firstName, lastName, email, pseudo, password, auth, photo\nrouter.post('/postUsers',\n  (req, res) => {\n    const promises = [];\n    req.body.userList.forEach((user) => {\n      let authValue = 0;\n      if (user.admin) {\n        authValue = 1;\n      }\n      promises.push(Models.User.addUser(\n        user.firstName,\n        user.lastName,\n        user.email,\n        user.pseudo, \n        user.password, \n        authValue,\n      ));\n    });\n    Promise.all(promises).then(() => {\n      Models.User.findAll().then((allUserData) => {\n        const userArray = [];\n        allUserData.forEach((user) => {\n          const {\n            firstName, lastName, email, pseudo, id, group_id,\n          } = user.dataValues; \n          userArray.push({\n            firstName: firstName,\n            lastName: lastName,\n            email: email,\n            pseudo: pseudo,\n            id: id,\n            group_id: group_id,\n          });\n        });\n        res.status(200).json({ userArray: userArray, success: true });\n      });\n    });\n  });\n\nrouter.get('/getUsers', (req, res) => {\n  Models.User.findAll().then((allUserData) => {\n    const userArray = [];\n    allUserData.forEach((user) => {\n      const {\n        firstName, lastName, email, pseudo, id, group_id,\n      } = user.dataValues; \n      userArray.push({\n        firstName: firstName,\n        lastName: lastName,\n        email: email,\n        pseudo: pseudo,\n        id: id,\n        group_id: group_id,\n      });\n    });\n    res.json(userArray);\n  });\n});\n\nrouter.post('/postGroup', (req, res) => {\n  Models.Sondage.findOne().then((sondage) => {\n    Models.Group.addGroup(sondage.dataValues.id, req.body.groupName).then(() => {\n      res.status(200).json({ success: true });\n    });\n  });\n});\n\nrouter.post('/changeUserGroup', (req, res) => {\n  const promises = [];\n  req.body.selectedUsers.forEach((user) => {\n    const promise = new Promise((resolve) => {\n      if (user.check) {\n        Models.User.update({ group_id: req.body.selectedGroup.id }, { where: { id: user.id } })\n          .then(() => {\n            resolve();\n          });\n      } else {\n        resolve();\n      }\n    });\n    promises.push(promise);\n  });\n  Promise.all(promises).then(() => {\n    res.status(200).json({ success: true });\n  });\n});\n// Route relative à l'affichage et la creation de sondage\n\nrouter.get('/getSondage', (req, res) => {\n  Models.User.findOne({ where: { id: req.user.id } }).then((user) => {\n    user.getSondage().then((sondageList) => {\n      res.status(200).json(sondageList);\n    });\n  });\n});\n\nrouter.get('/getGroups', (req, res) => {\n  Models.User.findOne({ where: { id: req.user.id } }).then((user) => {\n    user.getGroups().then((groupList) => {\n      console.log(\"Sent all groups to client\");\n      res.status(200).json(groupList);\n    });\n  });\n});\n\nrouter.post('/postSondage', (req, res) => {\n  Models.User.findOne({ where: { id: req.user.id } }).then((user) => {\n    user.createSondage(req.body).then((sondageId) => {\n      res.json({ sondageId: sondageId });\n    });\n  });\n});\n\nrouter.post('/changeNextSondage', (req, res) => {\n  if (!req.body) {\n    res.status(400).send(\"Bad Request : The body doesnt contain next_sondage ! \");\n  } else {\n    Models.Group.update({ sondage_id: req.body.sondage_id }, { where: { id: req.body.group_id } })\n      .then(() => {\n        console.log(\"Changed the sondage to sondage: \", req.body.sondage_id, \" for the group: \", req.body.sondage_id);\n        res.status(200).json(`Changed the sondage to sondage: ${req.body.sondage_name} for the group: ${req.body.sondage_name}`);\n      });\n  }\n});\n\n// Route relative aux statisques\n\nrouter.get('/getCommentaireJour/:jour', (req, res) => {\n  Models.User.findById(req.user.id).then((user) => {\n    user.getCommentairesJour(req.params.jour).then((comments) => {\n      res.status(200).json(comments);\n    });\n  });\n});\n\nrouter.get(\"/generalStatistics\", (req, res) => {\n  Models.User.findById(req.user.id).then((user) => {\n    user.getStatistics((statisticTab) => {\n      res.json(statisticTab);\n    });\n  });\n});\n\nrouter.get(\"/specificStatistics/:year/:month/:day/:group\", (req, res) => {\n  Models.User.findById(req.user.id).then((user) => {\n    user.getStatisticsSpecific(req.params).then((sondageResult) => {\n      res.json(sondageResult);\n    });\n  });\n});\n\n// Route relative aux aux mot clef\n\nrouter.get(\"/getKeywords\", (req, res) => {\n  Models.Keyword.findAll().then((keywords) => {\n    const keywordList = [];\n    keywords.forEach((keyword) => {\n      keywordList.push(keyword.dataValues.name);\n    });\n    res.status(200).json(keywordList);\n  });\n});\n\nrouter.post(\"/addKeyWord\", (req, res) => {\n  Models.Keyword.addKeyword(req.body.name).then(() => {\n    Models.Keyword.findAll().then((keywords) => {\n      const keywordList = [];\n      keywords.forEach((keyword) => {\n        keywordList.push(keyword.dataValues.name);\n      });\n      res.status(200).json(keywordList);\n    });\n  });\n});\n\n// Route relative aux posts\n\nrouter.post(\"/addPost\", (req, res) => {\n  Models.Post.addPost(req.body.post);\n  res.json({\n    success: true,\n  });\n});\n\nmodule.exports = router;"],"file":"admin.js"}